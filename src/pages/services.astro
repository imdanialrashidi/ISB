---
import SectionTitle from "../components/SectionTitle.astro";
import ServicesAccordion from "../components/ServicesAccordion.astro";
import servicesData from "../content/services.json";
import BaseLayout from "../layouts/BaseLayout.astro";
import type { ServiceItem } from "../lib/types";

const services = servicesData as ServiceItem[];

const grouped = Object.entries(
  services.reduce<Record<string, ServiceItem[]>>((acc, item) => {
    if (!acc[item.category]) {
      acc[item.category] = [];
    }
    acc[item.category].push(item);
    return acc;
  }, {}),
).map(([title, items]) => ({ title, items }));
---

<BaseLayout
  title="خدمات شرکت"
  description="خدمات شرکت ایمن صنعت باتاب شامل ارزیابی ایمنی، بازرسی فنی، آموزش، مشاوره HSE و خدمات تخصصی پروژه."
  canonicalPath="/services"
>
  <section class="section-block">
    <div class="container-wrap">
      <SectionTitle
        title="خدمات شرکت ایمن صنعت باتاب"
        subtitle="فهرست خدمات بر اساس مستندات رسمی شرکت ارائه شده و شامل خدمات دارای مجوز، صدور تاییدیه و پشتیبانی اجرایی است."
      />
      <ServicesAccordion groups={grouped} />
    </div>
  </section>
</BaseLayout>
