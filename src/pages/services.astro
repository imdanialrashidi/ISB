---
import SectionTitle from "../components/SectionTitle.astro";
import ServicesAccordion from "../components/ServicesAccordion.astro";
import servicesData from "../content/services.json";
import BaseLayout from "../layouts/BaseLayout.astro";
import type { ServiceItem } from "../lib/types";

const services = servicesData as ServiceItem[];

const grouped = Object.entries(
  services.reduce<Record<string, ServiceItem[]>>((acc, item) => {
    if (!acc[item.category]) {
      acc[item.category] = [];
    }
    acc[item.category].push(item);
    return acc;
  }, {}),
).map(([title, items]) => ({ title, items }));
---

<BaseLayout
  title="خدمات"
  description="آشنایی با خدمات ایمن صنعت باتاب در زمینه ایمنی، آموزش، مشاوره و پشتیبانی پروژه‌ها."
  canonicalPath="/services"
>
  <section class="section-block">
    <div class="container-wrap">
      <SectionTitle
        title="خدمات ایمن صنعت باتاب"
        subtitle="خدمات ما به‌صورت دسته‌بندی‌شده ارائه شده تا سریع‌تر گزینه مناسب کسب‌وکار خود را پیدا کنید."
      />
      <ServicesAccordion groups={grouped} />
    </div>
  </section>
</BaseLayout>
